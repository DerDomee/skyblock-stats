<div id="not_supported">
    Your Browser is not supported. Please get <a href="https://www.mozilla.org/firefox/new">Mozilla Firefox</a> or <a href="https://www.google.com/chrome/">Google Chrome</a>.
</div>
<script>
    if(navigator.userAgent.indexOf("MSIE") >= 0){
        document.getElementById('not_supported').className = 'show-not-supported';
    }
</script>
<header class="page-<%= page %>">
    <div class="logo-wrapper"></div>
    <a href="/" id="site_name">sky.derdom.ee</a>
    <div class="social-button" id="info_button" onclick="toggleInfo()">About</div>
    <div class="social-button" id="changelog_button" onclick="toggleChangelog()">Changelog</div>
    <% if('donations' in extra){ %>
        <a title="Patreon" target="_blank" rel="nofollow" href="https://patreon.com/LeaPhant" class="social-button patreon"><%= extra.donations.patreon %> Patrons<div class="social-icon"></div></a>
    <% } %>
    <div id="search_user"><input placeholder="Enter username" <% if(page == 'index'){ %>tabindex="-1"<% } %> type="text" id="inp_search_user"></input><a href="#" <% if(page == 'index'){ %>tabindex="-1"<% } %> id="btn_search_user"></a></div>
</header>
<div id="info_box">
    <div onclick="toggleInfo()" id="info_close"></div>
    <div id="info_box_content">
        <p>sky.derdom.ee (former <a href="https://sky.lea.moe">sky.lea.moe</a>) is currently maintained by <a href="https://dominikriedig.de" target="_blank">derdomee_</a> and it's current codebase can be found at <a class="link link-github" href="https://github.com/DerDomee/skyblock-stats" target="_blank">GitHub</a></p>
        <p>This open-source project was originally created by <a class="link link-twitter" href="https://twitter.com/LeaPhant" target="_blank">LeaPhant</a>, who stepped down from developing the stat viewer early August 2020.</p>
        <h4>Used Resources</h4>
        <ul>
            <li>Data: <a rel="nofollow" href="https://api.hypixel.net/" target="_blank">Hypixel API</a> by <span class="name">Hypixel</span>.</li>
            <li>Animated Custom Weapons and Armors: <a rel="nofollow" href="https://hypixel.net/threads/2138599/" target="_blank">FurfSky+</a> by <span class="name">Furf__</span>.</li>
            <li>Additional Custom Textures: <a rel="nofollow" href="https://hypixel.net/threads/2147652/" target="_blank">Vanilla+</a> by <span class="name">TBlazeWarriorT</span>.</li>
            <li>Default Textures: <a rel="nofollow" href="https://www.minecraft.net/" target="_blank">Minecraft</a> by <span class="name">Mojang</span>.</li>
            <li>Player Heads: <a rel="nofollow" href="https://hypixel.net/forums/skyblock.157/" target="_blank">SkyBlock</a> by <span class="name">Hypixel</span>.</li>
            <li>Background Resource Pack: <a rel="nofollow" href="https://www.planetminecraft.com/texture_pack/16x132-dandelion-cute-and-swirly/" target="_blank">Dandelion</a> by <span class="name">Steelfeathers</span>.</li>
            <li>Background Shaders: <a rel="nofollow" href="https://sildurs-shaders.github.io/" target="_blank">Sildur's Vibrant Shaders</a> by <span class="name">Sildur</span>.</li>
            <li>Skin Renderer: <a rel="nofollow" href="https://github.com/LeaPhant/skinview3d/" target="_blank">skinview3d</a> by <span class="name">Blessing Skin</span>.</li>
        </ul>
    </div>
</div>
<div id="changelog_box">
  <div onclick="toggleChangelog()" id="changelog_close"></div>
  <div id="changelog_box_content">
    	<h4 class="text-highlight">0.9</h4>
      <ul>
        <li>Dockerized project</li>
        <li>Simplified project structure</li>
      </ul>
  </div>
</div>
<script src="/resources/js/modernizr.js"></script>
<script>

    function toggleInfo(){
        let infoBox = document.querySelector('#info_box');

        if(infoBox.classList.contains('info-opened'))
          infoBox.classList.remove('info-opened')
      else
          infoBox.classList.add('info-opened');
    }

    function toggleChangelog(){
        let changelogBox = document.querySelector('#changelog_box');

        if(changelogBox.classList.contains('info-opened'))
            changelogBox.classList.remove('info-opened')
        else
            changelogBox.classList.add('info-opened');
    }

    Modernizr.on('webp', function(result){
        if(!Modernizr.webp.lossless){
            [].forEach.call(document.querySelectorAll('.item-icon'), function(element){
                document.documentElement.classList.add('no-webp');
            });

            [].forEach.call(document.querySelectorAll('.sea-creature-image'), function(element){
                element.style.backgroundImage = element.style.backgroundImage.replace(".webp", ".png");
            });
        }
    });

    if(!Modernizr.testAllProps('clip-path', 'ellipse(10px 10px at 10px 10px)'))
        document.documentElement.classList.add('no-clip-path');

    if(!Modernizr.testAllProps('transform', 'translateY(10px)'))
        document.documentElement.classList.add('no-transform');

    tippy('*[data-tippy-content]');

    const prideFlag = document.querySelector('.pride-flag');
    const prideFlags = ["rainbow", "trans", "lesbian", "bi", "pan", "nb", "ace", "genderfluid", "logo"];

    let currentFlag = prideFlags.length - 1;

    if(localStorage.getItem('currentFlag')){
        currentFlag = parseInt(localStorage.getItem('currentFlag'));
        prideFlag.className = 'pride-flag ' + prideFlags[currentFlag];
    }

    prideFlag.addEventListener('click', function(){
        currentFlag++;

        if(currentFlag > prideFlags.length - 1)
            currentFlag = 0;

        localStorage.setItem('currentFlag', currentFlag);
        prideFlag.className = 'pride-flag ' + prideFlags[currentFlag];
    });
</script>
